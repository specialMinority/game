<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì½˜ì†” PVP í„´ì œ ê²Œì„</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background-color: #f0f0f0; padding: 20px; text-align: center; }
    #output {
      width: 100%; max-width: 600px; height: 300px; margin: 0 auto 20px;
      padding: 10px; background-color: #fff; border: 1px solid #ccc; border-radius: 8px;
      overflow-y: auto; white-space: pre-line; text-align: left;
    }
    button {
      padding: 10px 20px; margin: 5px; border: none; border-radius: 5px;
      background-color: #007bff; color: white; font-size: 16px; cursor: pointer;
    }
    button:hover { background-color: #0056b3; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <h1>2D í„´ì œ PVP ê²Œì„</h1>
  <div id="selection">
    <p>ìºë¦­í„°ë¥¼ ì„ íƒí•˜ì„¸ìš”:</p>
    <button onclick="selectCharacter('Mage')">ë§ˆë²•ì‚¬</button>
    <button onclick="selectCharacter('SwordMaster')">ì†Œë“œë§ˆìŠ¤í„°</button>
    <button onclick="selectCharacter('Gunner')">ê±°ë„ˆ</button>
    <button onclick="selectCharacter('Priest')">í”„ë¦¬ìŠ¤íŠ¸</button>
  </div>
  <div id="gameUI" class="hidden">
    <div id="output">ê²Œì„ ë¡œê·¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
    <div>
      <button onclick="attack('ultimate')">ê¶ê·¹ê¸°</button>
      <button onclick="attack('main')">ì£¼ë ¥ê¸°</button>
      <button onclick="attack('normal')">ì¼ë°˜ê¸°</button>
    </div>
    <div style="margin-top: 20px;">
      <button onclick="location.reload()">ğŸ” ë‹¤ì‹œ ì‹œì‘</button>
    </div>
  </div>
  <script>
    class Skill {
      constructor(name, damage, accuracy) {
        this.name = name;
        this.damage = damage;
        this.accuracy = accuracy;
      }
      hit() { return Math.random() * 100 < this.accuracy; }
    }
    class Character {
      constructor(name, hp) {
        this.name = name;
        this.hp = hp;
      }
      takeDamage(damage) { this.hp -= damage; }
      ultimate(target) {}
      mainSkill(target) {}
      normalSkill(target) {}
      isAlive() { return this.hp > 0; }
    }
    class Mage extends Character {
      constructor(name) {
        super(name, 100);
        this.meteor = new Skill("ë©”í…Œì˜¤", 200, 5);
        this.fireball = new Skill("íŒŒì´ì–´ë³¼", 80, 20);
        this.rapidFire = new Skill("ì—°ì†ë°œì‚¬", 20, 100);
      }
      ultimate(t) { log(`${this.name}(ì´)ê°€ ë©”í…Œì˜¤ë¥¼ ì‹œì „í•©ë‹ˆë‹¤!`); if (this.meteor.hit()) { t.takeDamage(this.meteor.damage); log(`ëª…ì¤‘! ${t.name}ì˜ ì²´ë ¥: ${t.hp}`); } else log("ì‹¤íŒ¨!"); }
      mainSkill(t) { log(`${this.name}(ì´)ê°€ íŒŒì´ì–´ë³¼ì„ ì‹œì „í•©ë‹ˆë‹¤!`); if (this.fireball.hit()) { t.takeDamage(this.fireball.damage); log(`ëª…ì¤‘! ${t.name}ì˜ ì²´ë ¥: ${t.hp}`); } else log("ì‹¤íŒ¨!"); }
      normalSkill(t) { log(`${this.name}(ì´)ê°€ ì—°ì†ë°œì‚¬ë¥¼ ì‹œì „í•©ë‹ˆë‹¤!`); t.takeDamage(this.rapidFire.damage); log(`ëª…ì¤‘! ${t.name}ì˜ ì²´ë ¥: ${t.hp}`); }
    }
    class SwordMaster extends Character {
      constructor(name) {
        super(name, 120);
        this.swordDance = new Skill("í™˜ì˜ê²€ë¬´", 60, 35);
        this.drawSlash = new Skill("ë°œë„", 40, 70);
        this.swordArt = new Skill("ë¦¬ê·€ê²€ìˆ ", 17, 100);
      }
      ultimate(t) { log(`${this.name}(ì´)ê°€ í™˜ì˜ê²€ë¬´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤!`); if (this.swordDance.hit()) { t.takeDamage(this.swordDance.damage); log(`ëª…ì¤‘! ${t.name}ì˜ ì²´ë ¥: ${t.hp}`); } else log("ì‹¤íŒ¨!"); }
      mainSkill(t) { log(`${this.name}(ì´)ê°€ ë°œë„ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤!`); if (this.drawSlash.hit()) { t.takeDamage(this.drawSlash.damage); log(`ëª…ì¤‘! ${t.name}ì˜ ì²´ë ¥: ${t.hp}`); } else log("ì‹¤íŒ¨!"); }
      normalSkill(t) { log(`${this.name}(ì´)ê°€ ë¦¬ê·€ê²€ìˆ ì„ ì‚¬ìš©í•©ë‹ˆë‹¤!`); t.takeDamage(this.swordArt.damage); log(`ëª…ì¤‘! ${t.name}ì˜ ì²´ë ¥: ${t.hp}`); }
    }
    class Gunner extends Character {
      constructor(name) {
        super(name, 110);
        this.quantumBomb = new Skill("ì–‘ìí­íƒ„", 90, 10);
        this.laserBazooka = new Skill("ë ˆì´ì €ë°”ì£¼ì¹´", 50, 40);
        this.gatlingGun = new Skill("ê²Œí‹€ë§ê±´", 15, 100);
      }
      ultimate(t) { log(`${this.name}(ì´)ê°€ ì–‘ìí­íƒ„ì„ ë°œì‚¬í•©ë‹ˆë‹¤!`); if (this.quantumBomb.hit()) { t.takeDamage(this.quantumBomb.damage); log(`ëª…ì¤‘! ${t.name}ì˜ ì²´ë ¥: ${t.hp}`); } else log("ì‹¤íŒ¨!"); }
      mainSkill(t) { log(`${this.name}(ì´)ê°€ ë ˆì´ì €ë°”ì£¼ì¹´ë¥¼ ë°œì‚¬í•©ë‹ˆë‹¤!`); if (this.laserBazooka.hit()) { t.takeDamage(this.laserBazooka.damage); log(`ëª…ì¤‘! ${t.name}ì˜ ì²´ë ¥: ${t.hp}`); } else log("ì‹¤íŒ¨!"); }
      normalSkill(t) { log(`${this.name}(ì´)ê°€ ê²Œí‹€ë§ê±´ì„ ë°œì‚¬í•©ë‹ˆë‹¤!`); t.takeDamage(this.gatlingGun.damage); log(`ëª…ì¤‘! ${t.name}ì˜ ì²´ë ¥: ${t.hp}`); }
    }
    class Priest extends Character {
      constructor(name) {
        super(name, 150);
        this.judgmentMaul = new Skill("ì°¸íšŒì˜ ë§ì¹˜", 50, 60);
        this.deflectingWall = new Skill("ë””í”Œë ‰íŠ¸ ì›”", 35, 85);
        this.bladePure = new Skill("ìˆœë°±ì˜ ì¹¼ë‚ ", 10, 100);
      }
      ultimate(t) { log(`${this.name}(ì´)ê°€ ì°¸íšŒì˜ ë§ì¹˜ë¥¼ ì‹œì „í•©ë‹ˆë‹¤!`); if (this.judgmentMaul.hit()) { t.takeDamage(this.judgmentMaul.damage); log(`ëª…ì¤‘! ${t.name}ì˜ ì²´ë ¥: ${t.hp}`); } else log("ì‹¤íŒ¨!"); }
      mainSkill(t) { log(`${this.name}(ì´)ê°€ ë””í”Œë ‰íŠ¸ ì›”ì„ ì‹œì „í•©ë‹ˆë‹¤!`); if (this.deflectingWall.hit()) { t.takeDamage(this.deflectingWall.damage); log(`ëª…ì¤‘! ${t.name}ì˜ ì²´ë ¥: ${t.hp}`); } else log("ì‹¤íŒ¨!"); }
      normalSkill(t) { log(`${this.name}(ì´)ê°€ ìˆœë°±ì˜ ì¹¼ë‚ ì„ ì‹œì „í•©ë‹ˆë‹¤!`); t.takeDamage(this.bladePure.damage); log(`ëª…ì¤‘! ${t.name}ì˜ ì²´ë ¥: ${t.hp}`); }
    }
    function log(msg) {
      const output = document.getElementById("output");
      output.textContent += msg + "\n";
      output.scrollTop = output.scrollHeight;
    }
    let player, enemy, playerTurn;
    function selectCharacter(type) {
      if (type === "Mage") player = new Mage("í”Œë ˆì´ì–´");
      else if (type === "SwordMaster") player = new SwordMaster("í”Œë ˆì´ì–´");
      else if (type === "Gunner") player = new Gunner("í”Œë ˆì´ì–´");
      else if (type === "Priest") player = new Priest("í”Œë ˆì´ì–´");
      const enemyTypes = [Mage, SwordMaster, Gunner, Priest];
      const EnemyClass = enemyTypes[Math.floor(Math.random() * 4)];
      enemy = new EnemyClass("ì ");
      playerTurn = Math.random() < 0.5;
      log(`ì „íˆ¬ ì‹œì‘! ${playerTurn ? 'í”Œë ˆì´ì–´' : 'ì '}(ì´)ê°€ ì„ ê³µì…ë‹ˆë‹¤.`);
      document.getElementById("selection").classList.add("hidden");
      document.getElementById("gameUI").classList.remove("hidden");
      if (!playerTurn) setTimeout(enemyAttack, 800);
    }
    function enemyAttack() {
      if (!enemy.isAlive() || !player.isAlive()) return;
      log("\nì ì˜ ê³µê²©!");
      const enemySkill = Math.floor(Math.random() * 3);
      if (enemySkill === 0) enemy.ultimate(player);
      else if (enemySkill === 1) enemy.mainSkill(player);
      else enemy.normalSkill(player);
      if (!player.isAlive()) { log("í”Œë ˆì´ì–´ê°€ ì“°ëŸ¬ì¡ŒìŠµë‹ˆë‹¤. íŒ¨ë°°."); return; }
      playerTurn = true;
    }
    function attack(skillType) {
      if (!player.isAlive() || !enemy.isAlive()) return;
      if (!playerTurn) return;
      if (skillType === "ultimate") player.ultimate(enemy);
      else if (skillType === "main") player.mainSkill(enemy);
      else if (skillType === "normal") player.normalSkill(enemy);
      if (!enemy.isAlive()) { log("ì ì„ ì²˜ì¹˜í–ˆìŠµë‹ˆë‹¤! ìŠ¹ë¦¬!"); return; }
      playerTurn = false;
      setTimeout(enemyAttack, 800);
    }
  </script>
</body>
</html>
